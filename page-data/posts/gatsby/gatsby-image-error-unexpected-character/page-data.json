{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/gatsby/gatsby-image-error-unexpected-character","result":{"data":{"markdownRemark":{"html":"<h2>에러 로그</h2>\n<hr>\n<p><code>Gatsby</code>로 블로그를 만들던 중 프로필란을 개발하고, 거기에 이미지를 삽입하는 작업을 하던 중 다음과 같은 에러가 발생했다.</p>\n<pre><code class=\"language-Powershell\">ModuleParseError: Module parse failed: Unexpected character '�' (1:0)\r\n  You may need an appropriate loader to handle \r\n  this file type, currently no loaders are \r\n  configured to process this file. See https://\r\n  webpack.js.or g/concepts#loaders\r\n  (Source code omitted for this binary file)\n</code></pre>\n</br>\n<h2>원인</h2>\n<hr>\n<p>이리저리 검색해본 후, 내가 이미지를 삽입한 방법이 잘못되었다는 걸 알았다.(<a href=\"https://github.com/gatsbyjs/gatsby/issues/11040\">https://github.com/gatsbyjs/gatsby/issues/11040</a>)</p>\n<p>나는 <code>img</code> 태그로 이미지를 추가하는 방식을 사용하고 있었다.</p>\n<pre><code class=\"language-javascript\">import profile from '...경로'\r\n\r\n...\r\n\r\n&#x3C;img src={profile} alt=\"\">\r\n\r\n...\n</code></pre>\n</br>\n<p>이런 방식으로 이미지를 추가할 경우 <code>url_loader</code>를 통해 이미지를 불러오게 되는데, <code>Gatsby</code>에서는 이런 방식으로 이미지를 삽일할 경우, 파일의 용량을 10000 byte(10kb 정도)로 제한하고 있다고 한다.</p>\n<p>이런 방식으로 추가된 파일은 base64로 인코딩돼서 첨부된다고 하는 걸 보니 아마도 사이트의 빠른 빌드를 위함이 아닌가 싶다.</p>\n<p>추가로, <code>url-loader</code>가 아닌 <code>gatsby-plugin-image</code>를 사용하여 이미지를 첨부할 것을 제안하고 있다.</p>\n</br>\n<h2><a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-image\">gatsby-plugin-image</a> 사용</h2>\n<hr>\n<p>처음 블로그를 생성했을 때 사용한 테마인 <code>gatsby-starter-default</code>에는 기본적으로 <code>gatsby-plugin-image</code>가 설치되어 있고, 이를 사용해서 이미지를 추가한 예제가 있기 때문에 기본적인 사용법을 알 수 있었다.</p>\n</br>\n<h3>플러그인 설치</h3>\n</br>\n<ol>\n<li>\n<p><code>gatsby-plugin-image</code>와 <code>gatsby-plugin-sharp</code>, <code>gatsby-source-filesystem</code>(정적 이미지를 추가할 경우) 또는 <code>gatsby-transformer-sharp</code>(동적 이미지를 추가할 경우)를 설치</p>\n</li>\n<li>\n<p><code>gatsby-config.js</code>에 플러그인을 추가</p>\n<pre><code class=\"language-javascript\">module.exports = {\r\n  plugins: [\r\n    `gatsby-plugin-image`,\r\n    `gatsby-plugin-sharp`,\r\n    `gatsby-transformer-sharp`, // 동적 이미지를 추가할 경우\r\n  ],\r\n}\n</code></pre>\n</li>\n</ol>\n</br>\n<h3>StaticImage 컴포넌트 사용</h3>\n</br>\n<ul>\n<li>\n<p>추가하려는 이미지가 정적이냐, 동적이냐에 따라 <code>&#x3C;StaticImage></code> 또는 <code>&#x3C;GatsbyImage></code> 컴포넌트를 선택</p>\n</li>\n<li>\n<p>나는 프로필란에 이미지를 삽입할 것이고, 이미지가 동적으로 바뀔 필요가 없기 때문에 <code>&#x3C;StaticImage></code> 컴포넌트를 선택함</p>\n</li>\n<li>\n<p><code>&#x3C;StaticImage></code> 컴포넌트를 사용해서 이미지를 삽입하는 방법은 <code>img</code> 태그를 사용한 방식과 같음</p>\n<pre><code class=\"language-javascript\">import { StaticImage } from \"gatsby-plugin-image\"\r\n\r\n...\r\n\r\n&#x3C;StaticImage src=\"...경로\" alt=\"\">\r\n\r\n...\n</code></pre>\n  </br>\n</li>\n<li>\n<p><code>&#x3C;StaticImage></code> 컴포넌트에서 이미지 사이즈나 레이아웃, lazy loading 시 처리할 방법 등을 설정</p>\n</li>\n<li>\n<p><code>StaticImage</code>를 사용할 때의 주의점:</p>\n<ul>\n<li>부모 컴포넌트로부터 어떠한 <code>prop</code>도 받을 수 없음</li>\n<li>이미지를 빌드 시에 불러오기 때문에, 파일명을 <code>prop</code>으로 전달하거나 컴포넌트 밖에서 정의할 수 없음</br>(컴포넌트 <code>scope</code> 안의 지역 변수여야 함)</li>\n</ul>\n</li>\n</ul>\n</br>\n<h2>프로필란에 적용</h2>\n<hr>\n<p><code>StaticImage</code> 컴포넌트 적용은 <code>img</code> 태그를 사용할 때와 유사하다.</p>\n<pre><code class=\"language-javascript\">&#x3C;StaticImage\r\n    src={\"../images/profile.png\"}\r\n    placeholder=\"blurred\"\r\n    width={80}\r\n    />\n</code></pre>\n<p><code>StaticImage</code>나 <code>GatsbyImage</code>를 사용하여 이미지를 표현할 때 여러 옵션을 추가할 수 있는데, 모든 옵션은 <a href=\"https://www.gatsbyjs.com/docs/reference/built-in-components/gatsby-plugin-image/\">이 문서</a>에서 확인할 수 있다.</p>\n<p>이번에 <code>StaticImage</code>를 사용할 때는 이미지를 로딩할 때의 임시 이미지 표현 방식(<code>placeholder</code>)과 이미지 너비(<code>width</code>)만 지정해주고, 나머지 스타일링은 <code>css</code>로 표현했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 559px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50528a460d666caf481be0d62ea9da08/a65ce/gatsby-image-error-unexpected-character-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHUlEQVQoz42RvUrEQBSF8yiCT+DCvoCthZW12NlY7hNYKTYW9oKN2Goj6ZYNbHSzYMCwSMgaMAgqkpj/309mJBFcXPbAnQOXc+7MuaMANE3DX7Q9wauWgPLDDXlREMUJSZpSVSX/XbQMQq+0po/PhHc/I05rwjCnrmvZr6qKPM9J05QsyzoWviiK8H1fstDJF4rDsl1OL24Yj++4ujzn+OyI2ZMpBdOpgWEYTCYTdF1H0zSGwyGmaTIajVBVFcuyCMPwd6DxoLM/2GJ7p09vY43dg01sZyYF8+c5tm3jOA6e51EUxUKVZdklUkTgpq4IXu45HOzR761zfXtCQy1juK4rYwVBQBzHq+2wXf3X2ysz67ETiIFJkiyYlv3yN31GDfwXksc4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"완성된 프로필란\"\n        title=\"완성된 프로필란\"\n        src=\"/static/50528a460d666caf481be0d62ea9da08/a65ce/gatsby-image-error-unexpected-character-01.png\"\n        srcset=\"/static/50528a460d666caf481be0d62ea9da08/772e8/gatsby-image-error-unexpected-character-01.png 200w,\n/static/50528a460d666caf481be0d62ea9da08/e17e5/gatsby-image-error-unexpected-character-01.png 400w,\n/static/50528a460d666caf481be0d62ea9da08/a65ce/gatsby-image-error-unexpected-character-01.png 559w\"\n        sizes=\"(max-width: 559px) 100vw, 559px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n<em><sub><center style=\"color: gray\">완성된 프로필란</center></sub></em></p>\n</br>\n<h2>정리</h2>\n<hr>\n<ul>\n<li>첨부 이미지의 용량이 작은 경우(10kb 미만)\n<ul>\n<li><code>img</code> 태그 사용 가능</li>\n</ul>\n</li>\n<li>대용량(정적, 동적) 이미지 첨부시\n<ul>\n<li><code>StaticImage</code> 또는 <code>GatsbyImage</code> 사용</li>\n</ul>\n</li>\n</ul>","headings":[{"value":"에러 로그"},{"value":"원인"},{"value":"gatsby-plugin-image 사용"},{"value":"프로필란에 적용"},{"value":"정리"}],"frontmatter":{"category":"gatsby","date":"2022-06-02","path":"/posts/gatsby/gatsby-image-error-unexpected-character","title":"이미지 첨부 시 'Module parse failed: Unexpected character' 에러 발생"}}},"pageContext":{"pagePath":"/posts/gatsby/gatsby-image-error-unexpected-character","category":"gatsby"}},"staticQueryHashes":["3649515864","712016698"]}